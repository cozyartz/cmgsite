# Development Guide\n\n## ğŸš€ Quick Start\n\n### Prerequisites\n- Node.js 18+\n- npm 9+\n- Git\n\n### Installation\n```bash\n# Clone the repository\ngit clone <repository-url>\ncd cmgsite\n\n# Install dependencies\nnpm install\n\n# Set up environment variables\ncp .env.example .env.local\n# Edit .env.local with your actual values\n\n# Initialize git hooks\nnpm run prepare\n\n# Start development server\nnpm run dev\n```\n\n## ğŸ“ Scripts\n\n### Development\n```bash\nnpm run dev          # Start development server\nnpm run preview      # Preview production build locally\n```\n\n### Code Quality\n```bash\nnpm run lint         # Check for linting errors\nnpm run lint:fix     # Fix auto-fixable linting errors\nnpm run format       # Format code with Prettier\nnpm run format:check # Check if code is formatted\n```\n\n### Testing\n```bash\nnpm run test         # Run tests in watch mode\nnpm run test:run     # Run tests once\nnpm run test:ui      # Run tests with UI\nnpm run test:coverage # Run tests with coverage report\n```\n\n### Building & Deployment\n```bash\nnpm run build        # Build for production\nnpm run build:spa    # Build SPA with routing config\nnpm run deploy:production # Deploy to production\nnpm run deploy:staging    # Deploy to staging\n```\n\n## ğŸ—ï¸ Project Structure\n\n```\nsrc/\nâ”œâ”€â”€ components/          # Reusable UI components\nâ”‚   â”œâ”€â”€ Layout.tsx      # Common layout wrapper\nâ”‚   â”œâ”€â”€ ErrorBoundary.tsx # Error boundary\nâ”‚   â””â”€â”€ .../            # Feature-specific components\nâ”œâ”€â”€ config/             # Configuration files\nâ”‚   â””â”€â”€ env.ts          # Environment validation\nâ”œâ”€â”€ contexts/           # React contexts\nâ”‚   â””â”€â”€ SupabaseAuthContext.tsx\nâ”œâ”€â”€ hooks/              # Custom React hooks\nâ”œâ”€â”€ lib/                # Core libraries and services\nâ”‚   â””â”€â”€ supabase.ts     # Supabase client & services\nâ”œâ”€â”€ pages/              # Page components\nâ”œâ”€â”€ test/               # Test utilities and setup\nâ”‚   â”œâ”€â”€ setup.ts        # Vitest setup\nâ”‚   â””â”€â”€ test-utils.tsx  # Custom render function\nâ”œâ”€â”€ utils/              # Utility functions\nâ””â”€â”€ App.tsx             # Main application component\n```\n\n## ğŸ¤– MAX AI Development

### AI Assistant Components
- **Admin MAX AI**: `src/components/admin/MaxHeadroomAI.tsx`
- **Client MAX AI**: `src/components/customer/CustomerMaxAI.tsx`

### Testing AI Responses
```bash
# Test admin AI responses
open http://localhost:5173/superadmin
# Navigate to MAX AI tab and test queries

# Test client AI responses  
open http://localhost:5173/client-portal
# Scroll to AI Assistant section and test SEO queries
```

### AI Security Features
- **Role-based responses**: Admin vs Client mode
- **Security keyword filtering**: Blocks unauthorized queries
- **Context-aware help**: Responses tailored to user permissions

### AI Development Guidelines
- Maintain security restrictions in client mode
- Test both admin and client response modes
- Ensure mobile responsiveness
- Validate quick action functionality

## ğŸ§ª Testing Strategy\n\n### Unit Tests\n- Component testing with React Testing Library\n- Utility function testing\n- Service layer testing\n\n### Integration Tests\n- Authentication flow testing\n- Route protection testing\n- API integration testing\n\n### E2E Tests (Future)\n- Critical user journeys\n- Cross-browser compatibility\n\n### Test Patterns\n```typescript\n// Component test example\nimport { render, screen } from '../test/test-utils';\nimport MyComponent from './MyComponent';\n\ndescribe('MyComponent', () => {\n  it('renders correctly', () => {\n    render(<MyComponent />);\n    expect(screen.getByText('Expected text')).toBeInTheDocument();\n  });\n});\n```\n\n## ğŸ“¦ Bundle Optimization\n\n### Code Splitting Strategy\n- **vendor-react**: React, React DOM, React Router\n- **vendor-supabase**: Supabase client\n- **vendor-icons**: Lucide React icons\n- **vendor-paypal**: PayPal SDK\n- **pages-main**: Home and Pricing pages\n- **pages-auth**: Authentication pages\n- **pages-admin**: Admin dashboards\n- **pages-services**: Service pages\n- **components-common**: Shared components\n- **components-auth**: Auth-specific components\n- **components-admin**: Admin-specific components\n\n### Performance Guidelines\n- Keep bundle chunks under 500KB\n- Lazy load admin/auth features\n- Optimize images and assets\n- Use tree shaking for unused code\n\n## ğŸ” Environment Variables\n\n### Required Variables\n```bash\nVITE_SUPABASE_URL=https://your-project.supabase.co\nVITE_SUPABASE_ANON_KEY=your-anon-key\n```\n\n### Optional Variables\n```bash\nVITE_SITE_URL=https://cozyartzmedia.com\nVITE_CALLBACK_URL=https://cozyartzmedia.com/auth/callback\nVITE_TURNSTILE_SITE_KEY=your-turnstile-key\nVITE_ENVIRONMENT=development|staging|production\n```\n\n### Environment Validation\nThe app validates all required environment variables on startup and provides clear error messages for missing variables.\n\n## ğŸš€ Deployment\n\n### Staging Deployment\n- Automatically deploys from `develop` branch\n- URL: `https://staging.cmgsite.pages.dev`\n- Environment: `staging`\n\n### Production Deployment\n- Automatically deploys from `main` branch\n- URL: `https://cozyartzmedia.com`\n- Environment: `production`\n\n### Manual Deployment\n```bash\n# Deploy to staging\nnpm run deploy:staging\n\n# Deploy to production\nnpm run deploy:production\n```\n\n## ğŸ”§ Git Workflow\n\n### Pre-commit Hooks\nAutomatically runs on every commit:\n- ESLint (with auto-fix)\n- Prettier (formatting)\n- TypeScript compilation check\n\n### Branch Strategy\n- `main`: Production-ready code\n- `develop`: Development integration branch\n- `feature/*`: Feature development branches\n- `hotfix/*`: Production hotfixes\n\n### Commit Guidelines\n```bash\n# Good commit messages\nfeat: add user authentication\nfix: resolve routing issue on mobile\ndocs: update API documentation\nrefactor: optimize bundle size\ntest: add component unit tests\n```\n\n## ğŸ› Debugging\n\n### Development Tools\n- React Developer Tools\n- Supabase Dashboard\n- Browser DevTools\n- Vite HMR\n\n### Common Issues\n\n**Environment Variables Not Loading**\n```bash\n# Check if .env.local exists\nls -la .env*\n\n# Verify variables are set\necho $VITE_SUPABASE_URL\n```\n\n**Authentication Issues**\n```bash\n# Test Supabase connection\nnpm run test:supabase\n\n# Check auth debug page\nopen http://localhost:5173/auth/debug\n```\n\n**Build Failures**\n```bash\n# Clear cache and reinstall\nrm -rf node_modules package-lock.json\nnpm install\n\n# Check TypeScript errors\nnpx tsc --noEmit\n```\n\n## ğŸ“ˆ Performance Monitoring\n\n### Bundle Analysis\n```bash\n# Analyze bundle size\nnpm run build\nnpx vite-bundle-analyzer dist\n```\n\n### Lighthouse Audits\n- Performance: > 90\n- Accessibility: > 95\n- Best Practices: > 90\n- SEO: > 90\n\n## ğŸ¤ Contributing\n\n1. Create a feature branch from `develop`\n2. Make your changes\n3. Ensure all tests pass: `npm run test:run`\n4. Ensure code quality: `npm run lint && npm run format:check`\n5. Create a pull request to `develop`\n6. Get approval and merge\n\n### Code Style\n- Use TypeScript for all new code\n- Follow React best practices\n- Write tests for new features\n- Document complex logic\n- Use semantic commit messages\n